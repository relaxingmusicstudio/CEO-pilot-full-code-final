{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "TaskOutcomeRecord",
  "type": "object",
  "additionalProperties": false,
  "required": [
    "outcomeId",
    "taskId",
    "taskType",
    "taskClass",
    "goalId",
    "agentId",
    "modelTier",
    "modelId",
    "cacheHit",
    "ruleUsed",
    "evaluationPassed",
    "qualityScore",
    "costCents",
    "modelCostCents",
    "toolCostCents",
    "durationMs",
    "retryCount",
    "humanOverride",
    "createdAt"
  ],
  "properties": {
    "outcomeId": { "type": "string", "minLength": 1 },
    "taskId": { "type": "string", "minLength": 1 },
    "taskType": { "type": "string", "minLength": 1 },
    "inputHash": { "type": "string", "minLength": 1 },
    "output": { "type": "object" },
    "taskClass": { "type": "string", "enum": ["routine", "novel", "high_risk"] },
    "goalId": { "type": "string", "minLength": 1 },
    "agentId": { "type": "string", "minLength": 1 },
    "modelTier": { "type": "string", "enum": ["economy", "standard", "advanced", "frontier"] },
    "modelId": { "type": "string", "minLength": 1 },
    "cacheHit": { "type": "boolean" },
    "ruleUsed": { "type": "boolean" },
    "evaluationPassed": { "type": "boolean" },
    "qualityScore": { "type": "number", "minimum": 0, "maximum": 1 },
    "costCents": { "type": "integer", "minimum": 0 },
    "modelCostCents": { "type": "integer", "minimum": 0 },
    "toolCostCents": { "type": "integer", "minimum": 0 },
    "durationMs": { "type": "integer", "minimum": 0 },
    "outcomeType": { "type": "string", "enum": ["executed", "failed", "deferred"] },
    "retryCount": { "type": "integer", "minimum": 0 },
    "humanOverride": { "type": "boolean" },
    "createdAt": { "type": "string", "format": "date-time" }
  }
}
